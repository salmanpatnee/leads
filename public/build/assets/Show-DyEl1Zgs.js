import{d as M,A as v,c as h,a as X,e as s,g as p,u as t,h as J,w as o,i,z as k,b as a,l as w,t as n,o as u,T as A,G as C,H as I,F as Q,D as R}from"./app-St-sUYe7.js";import{S as P,C as g}from"./SiteController-4ih4tQP_.js";import{C as S,_ as $,a as D,b as T}from"./index-DeTyVWyC.js";import{_ as Y,E as Z}from"./index-BJEPnrX3.js";import{_ as y}from"./index-JZXl5pKO.js";import{_ as K,a as E,b as z,c as B,d as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-CTae_BAC.js";import{d as ee,_ as te,a as se,b as ae,c as oe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B7BvN6ib.js";import{_ as ie,a as le}from"./DialogFooter.vue_vue_type_script_setup_true_lang-9blQAizC.js";import{i as V,G as re,_ as ne}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dzzjh7N4.js";import{A as de}from"./arrow-left-D8RW-8Ep.js";import{S as ce,T as ue}from"./trash-2-BfcnBaPb.js";import{c as q}from"./createLucideIcon-DDMdpA3c.js";import{C as j}from"./calendar-B24yVi7y.js";import{E as fe}from"./eye-off-N0WsRrE5.js";import{C as me}from"./copy-DGIU2SyK.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CSEUMRIG.js";import"./index-CwgXVMQ9.js";import"./useForwardPropsEmits-CFIpQ9cm.js";import"./x-BQPHLKnh.js";import"./useForwardExpose-BS5VQN5F.js";import"./VisuallyHidden-C2LcDY83.js";import"./RovingFocusGroup-BDpUZ890.js";import"./index-CqmfE78h.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DaayJZ3e.js";const L=q("KeyIcon",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);const ye=q("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),be={class:"site-detail-page relative flex h-full flex-1 flex-col gap-6 p-4 md:p-8"},ve={class:"relative flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between"},ge={class:"space-y-3"},xe={class:"flex items-center gap-3"},_e={class:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 dark:bg-primary/20"},he={class:"font-display text-3xl font-bold tracking-tight text-foreground"},ke={class:"font-body text-base text-muted-foreground"},we={class:"font-mono text-sm"},Ae={class:"flex items-center gap-2"},Ce={class:"relative grid gap-6 lg:grid-cols-2"},Ie={class:"flex items-center gap-2"},Pe={class:"rounded-lg bg-primary/10 p-2"},Se={class:"info-item space-y-2"},$e={class:"font-body text-base font-semibold text-foreground"},De={class:"info-item space-y-2"},Te={class:"font-mono text-base text-foreground"},Ke={class:"info-item space-y-2"},Ee={class:"info-item space-y-2"},ze={class:"font-body text-xs font-semibold uppercase tracking-wider text-muted-foreground"},Be={class:"font-body text-base text-foreground"},Ue={class:"info-item space-y-2"},Ve={class:"font-body text-xs font-semibold uppercase tracking-wider text-muted-foreground"},je={class:"font-body text-base text-foreground"},Le={class:"flex items-center gap-2"},qe={class:"rounded-lg bg-primary/10 p-2"},Fe={class:"space-y-3"},Ne={class:"api-key-container flex items-center gap-2 rounded-lg border border-border/60 bg-muted/30 p-3 transition-colors hover:border-border hover:bg-muted/50"},Ge=["aria-label"],He={class:"flex items-center gap-1"},Oe=["aria-label"],We={class:"flex items-center gap-2 rounded-lg bg-primary/10 px-3 py-2 dark:bg-primary/20",role:"status","aria-live":"polite"},Me={class:"font-semibold text-foreground"},Xe={class:"text-muted-foreground"},Je=M({__name:"Show",props:{site:{}},setup(l){const d=l;console.log("Site props:",d.site),console.log("API Key present:",!!d.site.api_key),console.log("API Key value:",d.site.api_key);const F=[{title:"Sites",href:V().url},{title:d.site.site_name,href:"#"}],f=v(!1),m=v(!1),c=v(!1),b=v(!1),N=h(()=>"â€¢".repeat(32)),G=h(()=>f.value?d.site.api_key:N.value);function H(){console.log("Toggling API key visibility"),f.value=!f.value}async function O(){console.log("copyApiKey called"),console.log("API key to copy:",d.site.api_key),c.value=!1;try{if(navigator.clipboard?.writeText)console.log("Using modern clipboard API"),await navigator.clipboard.writeText(d.site.api_key),m.value=!0;else{console.log("Using fallback clipboard method");const r=document.createElement("textarea");r.value=d.site.api_key,r.style.position="fixed",r.style.left="-999999px",r.style.top="-999999px",document.body.appendChild(r),r.focus(),r.select();try{document.execCommand("copy")?m.value=!0:c.value=!0}finally{document.body.removeChild(r)}}m.value?setTimeout(()=>{m.value=!1},2e3):c.value&&setTimeout(()=>{c.value=!1},3e3)}catch(r){console.error("Failed to copy API key:",r),c.value=!0,setTimeout(()=>{c.value=!1},3e3)}}function W(){R.delete(P.destroy.url(d.site.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1}})}function x(r){return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(r,e)=>(u(),X(Q,null,[s(t(J),{title:l.site.site_name},null,8,["title"]),(u(),p(k("style"),null,{default:o(()=>[...e[2]||(e[2]=[i(" @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Manrope:wght@400;500;600;700&display=swap'); ",-1)])]),_:1})),s(ne,{breadcrumbs:F},{default:o(()=>[a("div",be,[e[21]||(e[21]=a("div",{class:"pointer-events-none absolute inset-0 opacity-[0.04] dark:opacity-[0.03]",style:{background:`radial-gradient(
                        circle at 80% 20%,
                        hsl(var(--primary)) 0%,
                        transparent 50%
                    )`}},null,-1)),a("div",ve,[a("div",ge,[s(t(y),{variant:"ghost",size:"sm","as-child":"",class:"-ml-3 font-body transition-all hover:-translate-x-1"},{default:o(()=>[s(t(w),{href:t(V)().url,"aria-label":"Back to Sites"},{default:o(()=>[s(t(de),{class:"mr-2 h-4 w-4","aria-hidden":"true"}),e[3]||(e[3]=i(" Back to Sites ",-1))]),_:1},8,["href"])]),_:1}),a("div",xe,[a("div",_e,[s(t(re),{class:"h-6 w-6 text-primary","aria-hidden":"true"})]),a("div",null,[a("h1",he,n(l.site.site_name),1),a("p",ke,[a("code",we,n(l.site.domain),1)])])])]),a("div",Ae,[s(t(y),{variant:"outline",size:"lg","as-child":"",class:"font-body font-medium shadow-sm"},{default:o(()=>[s(t(w),{href:t(P).edit.url(l.site.id),"aria-label":`Edit ${l.site.site_name}`},{default:o(()=>[s(t(ce),{class:"mr-2 h-4 w-4","aria-hidden":"true"}),e[4]||(e[4]=i(" Edit ",-1))]),_:1},8,["href","aria-label"])]),_:1}),s(t(y),{variant:"destructive",size:"lg",onClick:e[0]||(e[0]=_=>b.value=!0),class:"font-body font-semibold shadow-md shadow-destructive/20","aria-label":`Delete ${l.site.site_name}`},{default:o(()=>[s(t(ue),{class:"mr-2 h-4 w-4","aria-hidden":"true"}),e[5]||(e[5]=i(" Delete ",-1))]),_:1},8,["aria-label"])])]),a("div",Ce,[s(t(K),{class:"detail-card border-border shadow-sm"},{default:o(()=>[s(t(E),{class:"space-y-2 pb-4"},{default:o(()=>[a("div",Ie,[a("div",Pe,[s(t(ye),{class:"h-4 w-4 text-primary","aria-hidden":"true"})]),s(t(z),{class:"font-display text-xl"},{default:o(()=>[...e[6]||(e[6]=[i("Site Information",-1)])]),_:1})]),s(t(B),{class:"font-body"},{default:o(()=>[...e[7]||(e[7]=[i(" Basic details about this WordPress site ",-1)])]),_:1})]),_:1}),s(t(U),{class:"space-y-5"},{default:o(()=>[a("div",Se,[e[8]||(e[8]=a("p",{class:"font-body text-xs font-semibold uppercase tracking-wider text-muted-foreground"}," Site Name ",-1)),a("p",$e,n(l.site.site_name),1)]),a("div",De,[e[9]||(e[9]=a("p",{class:"font-body text-xs font-semibold uppercase tracking-wider text-muted-foreground"}," Domain ",-1)),a("p",Te,n(l.site.domain),1)]),a("div",Ke,[e[10]||(e[10]=a("p",{class:"font-body text-xs font-semibold uppercase tracking-wider text-muted-foreground"}," Status ",-1)),s(t(Y),{variant:l.site.is_active?"default":"secondary",class:"gap-1.5 font-body font-medium","aria-label":l.site.is_active?"Active site":"Inactive site"},{default:o(()=>[(u(),p(k(l.site.is_active?t(g):t(S)),{class:"h-3.5 w-3.5","aria-hidden":"true"})),i(" "+n(l.site.is_active?"Active":"Inactive"),1)]),_:1},8,["variant","aria-label"])]),a("div",Ee,[a("p",ze,[s(t(j),{class:"mr-1 inline-block h-3.5 w-3.5","aria-hidden":"true"}),e[11]||(e[11]=i(" Created At ",-1))]),a("p",Be,n(x(l.site.created_at)),1)]),a("div",Ue,[a("p",Ve,[s(t(j),{class:"mr-1 inline-block h-3.5 w-3.5","aria-hidden":"true"}),e[12]||(e[12]=i(" Last Updated ",-1))]),a("p",je,n(x(l.site.updated_at)),1)])]),_:1})]),_:1}),s(t(K),{class:"detail-card border-border shadow-sm"},{default:o(()=>[s(t(E),{class:"space-y-2 pb-4"},{default:o(()=>[a("div",Le,[a("div",qe,[s(t(L),{class:"h-4 w-4 text-primary","aria-hidden":"true"})]),s(t(z),{class:"font-display text-xl"},{default:o(()=>[...e[13]||(e[13]=[i("API Access",-1)])]),_:1})]),s(t(B),{class:"font-body"},{default:o(()=>[...e[14]||(e[14]=[i(" Use this API key to authenticate requests from WordPress ",-1)])]),_:1})]),_:1}),s(t(U),{class:"space-y-5"},{default:o(()=>[a("div",Fe,[e[18]||(e[18]=a("p",{class:"font-body text-xs font-semibold uppercase tracking-wider text-muted-foreground"}," API Key ",-1)),a("div",Ne,[a("code",{class:"flex-1 select-all font-mono text-sm text-foreground/80","aria-label":f.value?"API key visible":"API key hidden"},n(G.value),9,Ge),a("div",He,[a("button",{type:"button",onClick:H,class:"inline-flex h-8 w-8 items-center justify-center rounded-md text-muted-foreground transition-colors hover:bg-primary/10 hover:text-foreground","aria-label":f.value?"Hide API key":"Show API key"},[f.value?(u(),p(t(fe),{key:0,class:"h-4 w-4","aria-hidden":"true"})):(u(),p(t(Z),{key:1,class:"h-4 w-4","aria-hidden":"true"}))],8,Oe),a("button",{type:"button",onClick:O,class:"inline-flex h-8 w-8 items-center justify-center rounded-md text-muted-foreground transition-colors hover:bg-primary/10 hover:text-foreground","aria-label":"Copy API key to clipboard"},[m.value?(u(),p(t(g),{key:0,class:"h-4 w-4 text-primary","aria-hidden":"true"})):(u(),p(t(me),{key:1,class:"h-4 w-4","aria-hidden":"true"}))])])]),s(A,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 scale-95"},{default:o(()=>[C(a("div",We,[s(t(g),{class:"h-4 w-4 text-primary","aria-hidden":"true"}),e[15]||(e[15]=a("span",{class:"font-body text-sm font-medium text-primary"}," API key copied to clipboard! ",-1))],512),[[I,m.value]])]),_:1}),s(A,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 scale-95"},{default:o(()=>[C(s(t($),{class:"border-destructive/50 bg-destructive/5",role:"alert","aria-live":"assertive"},{default:o(()=>[s(t(S),{class:"h-4 w-4 text-destructive"}),s(t(D),{class:"font-body text-destructive"},{default:o(()=>[...e[16]||(e[16]=[i("Error",-1)])]),_:1}),s(t(T),{class:"font-body text-sm text-destructive/90"},{default:o(()=>[...e[17]||(e[17]=[i(" Failed to copy. Please select and copy manually. ",-1)])]),_:1})]),_:1},512),[[I,c.value]])]),_:1})]),s(t($),{class:"border-primary/30 bg-primary/5 dark:border-primary/30 dark:bg-primary/10"},{default:o(()=>[s(t(L),{class:"h-4 w-4 text-primary"}),s(t(D),{class:"font-body font-semibold text-foreground"},{default:o(()=>[...e[19]||(e[19]=[i(" How to use this API key ",-1)])]),_:1}),s(t(T),{class:"space-y-2 font-body text-muted-foreground"},{default:o(()=>[...e[20]||(e[20]=[a("p",{class:"text-sm"},[i(" Include this key in the "),a("code",{class:"rounded bg-primary/10 px-1.5 py-0.5 font-mono text-xs"}," X-API-Key "),i(" header when making requests to the leads API endpoint. ")],-1),a("p",{class:"text-xs"}," This ensures secure communication between your WordPress site and the leads system. ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])]),s(t(ee),{open:b.value,"onUpdate:open":e[1]||(e[1]=_=>b.value=_)},{default:o(()=>[s(t(te),{class:"font-body"},{default:o(()=>[s(t(se),{class:"space-y-4"},{default:o(()=>[s(t(ae),{class:"font-display text-2xl"},{default:o(()=>[i(" Delete "+n(l.site.site_name)+"? ",1)]),_:1}),s(t(oe),{class:"space-y-3 text-base leading-relaxed"},{default:o(()=>[a("p",null,[e[22]||(e[22]=i(" Once deleted, you will no longer be able to receive leads from ",-1)),a("strong",Me,n(l.site.site_name),1),a("span",Xe,"("+n(l.site.domain)+")",1),e[23]||(e[23]=i(". ",-1))]),e[24]||(e[24]=a("p",null," This action is permanent and cannot be undone. ",-1))]),_:1})]),_:1}),s(t(ie),{class:"gap-2 sm:gap-3"},{default:o(()=>[s(t(le),{"as-child":""},{default:o(()=>[s(t(y),{variant:"outline",size:"lg",class:"font-body font-medium"},{default:o(()=>[...e[25]||(e[25]=[i(" Cancel ",-1)])]),_:1})]),_:1}),s(t(y),{type:"button",variant:"destructive",size:"lg",onClick:W,class:"font-body font-semibold shadow-lg shadow-destructive/20","data-test":"confirm-delete-site-button"},{default:o(()=>[...e[26]||(e[26]=[i(" Delete Site ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}}),ht=pe(Je,[["__scopeId","data-v-901bb5a4"]]);export{ht as default};
