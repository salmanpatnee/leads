import{d as Q,A as h,c as P,M as W,a as A,e as t,u as e,h as Y,w as s,g as d,b as o,o as i,z as j,i as r,j as C,l as $,x as H,t as f,F as z,B as J,y as R,D as N}from"./app-CGCrkDAk.js";import{S as b,C as E}from"./SiteController-B3SDZurz.js";import{S as M,_ as Z,a as ee,b as D,c as x,d as te,e as _,f as ae}from"./Pagination.vue_vue_type_script_setup_true_lang-BonCI1Ln.js";import{_ as se}from"./index-td2UxUZz.js";import{_ as u}from"./index-BkvyfrpA.js";import{d as le,_ as oe,a as re,b as ie,c as ne}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DpwD4NAC.js";import{_ as de,a as ue}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CuzZO3Lo.js";import{_ as fe}from"./Input.vue_vue_type_script_setup_true_lang-CPdG0onq.js";import{_ as me,a as ce,b as pe,c as ye,d as V}from"./SelectValue.vue_vue_type_script_setup_true_lang-BalRsmVg.js";import{c as B,G as q,_ as _e}from"./AppLayout.vue_vue_type_script_setup_true_lang-jsF6Rd-b.js";import{c as O}from"./createLucideIcon-D0BTc4jw.js";import{X as ve}from"./x-BKbi-K4p.js";import{C as he}from"./copy-6hRUAcZG.js";import{E as be}from"./eye-DdxRhLoY.js";import{S as xe,T as ge}from"./trash-2-CQqkm7eQ.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CSEUMRIG.js";import"./useForwardPropsEmits-eJSDdWRY.js";import"./VisuallyHidden-C3_DIH2-.js";import"./index-ibSaU8ej.js";import"./useForwardExpose-DXgLtNcZ.js";import"./RovingFocusGroup-CzTOgVIS.js";import"./check-CWQPguqC.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./useFormControl-_38DnNvm.js";import"./index-CqmfE78h.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BTNcwPF7.js";const ke=O("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const K=O("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ce={class:"sites-manager relative flex h-full flex-1 flex-col gap-6 p-4 md:p-8"},$e={class:"relative flex flex-col gap-4 md:flex-row md:items-start md:justify-between"},Se={class:"relative flex flex-col gap-3 sm:flex-row sm:items-center"},Ae={class:"relative flex-1"},ze={class:"flex items-center gap-2"},De={class:"table-container relative overflow-hidden rounded-xl border border-border bg-card shadow-sm"},Ve={class:"overflow-x-auto"},Te={class:"flex flex-col items-center justify-center gap-3 text-muted-foreground"},Ie={class:"rounded-full bg-muted p-4"},Fe={class:"space-y-1"},Pe={class:"font-body text-base font-semibold text-foreground"},je={class:"font-body text-sm"},Ne={class:"flex items-center gap-2"},Ee={class:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-primary/10 dark:bg-primary/20"},Me={class:"font-mono text-sm"},Be={class:"flex items-center gap-2"},qe={class:"flex-1 font-mono text-xs text-muted-foreground line-clamp-1"},Ke=["onClick","aria-label"],Oe={class:"flex items-center justify-end gap-1"},Ue={class:"font-semibold text-foreground"},Xe={class:"text-muted-foreground"},Ge=Q({__name:"Index",props:{sites:{},filters:{}},setup(S){const v=S,U=[{title:"Sites",href:b.index.url()}],y=h(v.filters.search||""),m=h(typeof v.filters.is_active=="boolean"?v.filters.is_active?"1":"0":v.filters.is_active||"all"),c=h(null),g=h(!1),p=h(null),T=P(()=>v.sites.data.length>0),w=P(()=>y.value||m.value!=="all");function k(){const n={};y.value&&(n.search=y.value),m.value!=="all"&&(n.is_active=m.value),N.visit(b.index.url({query:n}),{preserveState:!0,preserveScroll:!0,only:["sites","filters"]})}function I(){y.value="",m.value="all",k()}function X(n){c.value=n,g.value=!0}function G(){c.value&&N.delete(b.destroy.url(c.value.id),{preserveScroll:!0,onSuccess:()=>{g.value=!1,c.value=null}})}async function L(n,a){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(a),p.value=n,setTimeout(()=>{p.value=null},2e3);else{const l=document.createElement("textarea");l.value=a,l.style.position="fixed",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select();try{document.execCommand("copy")&&(p.value=n,setTimeout(()=>{p.value=null},2e3))}finally{document.body.removeChild(l)}}}catch(l){console.error("Failed to copy API key:",l),p.value=n,setTimeout(()=>{p.value=null},2e3)}}return W(m,()=>{k()}),(n,a)=>(i(),A(z,null,[t(e(Y),{title:"Sites"}),t(_e,{breadcrumbs:U},{default:s(()=>[(i(),d(j("style"),null,{default:s(()=>[...a[3]||(a[3]=[r(" @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Manrope:wght@400;500;600;700&display=swap'); ",-1)])]),_:1})),o("div",Ce,[a[19]||(a[19]=o("div",{class:"pointer-events-none absolute inset-0 opacity-[0.04] dark:opacity-[0.03]",style:{background:`radial-gradient(
                        circle at 20% 20%,
                        hsl(var(--primary)) 0%,
                        transparent 50%
                    )`}},null,-1)),o("div",$e,[a[5]||(a[5]=o("div",{class:"space-y-1.5"},[o("h1",{class:"font-display text-3xl font-bold tracking-tight text-foreground md:text-4xl"}," Sites "),o("p",{class:"max-w-2xl font-body text-base text-muted-foreground"}," Manage WordPress sites that send leads to your system ")],-1)),t(e(u),{"as-child":"",size:"lg",class:"create-btn shrink-0 font-body font-semibold shadow-md transition-all hover:shadow-lg"},{default:s(()=>[t(e($),{href:e(B)().url,"data-test":"create-site-link"},{default:s(()=>[t(e(K),{class:"mr-2 h-5 w-5","aria-hidden":"true"}),a[4]||(a[4]=r(" Create Site ",-1))]),_:1},8,["href"])]),_:1})]),o("div",Se,[o("div",Ae,[t(e(M),{class:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground","aria-hidden":"true"}),t(e(fe),{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=l=>y.value=l),type:"search",placeholder:"Search by site name or domain...",class:"h-11 pl-11 font-body shadow-sm",onKeydown:H(k,["enter"]),"aria-label":"Search sites"},null,8,["modelValue"])]),o("div",ze,[t(e(me),{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=l=>m.value=l),"aria-label":"Filter by status"},{default:s(()=>[t(e(ce),{class:"h-11 w-[180px] font-body shadow-sm"},{default:s(()=>[t(e(pe),{placeholder:"All Sites"})]),_:1}),t(e(ye),null,{default:s(()=>[t(e(V),{value:"all"},{default:s(()=>[...a[6]||(a[6]=[r("All Sites",-1)])]),_:1}),t(e(V),{value:"1"},{default:s(()=>[...a[7]||(a[7]=[r("Active Only",-1)])]),_:1}),t(e(V),{value:"0"},{default:s(()=>[...a[8]||(a[8]=[r("Inactive Only",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(u),{variant:"outline",size:"lg",onClick:k,class:"h-11 shadow-sm","aria-label":"Apply filters"},{default:s(()=>[t(e(M),{class:"h-4 w-4"})]),_:1}),w.value?(i(),d(e(u),{key:0,variant:"ghost",size:"lg",onClick:I,class:"h-11 font-body","aria-label":"Clear all filters"},{default:s(()=>[t(e(ve),{class:"mr-2 h-4 w-4","aria-hidden":"true"}),a[9]||(a[9]=r(" Clear ",-1))]),_:1})):C("",!0)])]),o("div",De,[o("div",Ve,[t(e(Z),null,{default:s(()=>[t(e(ee),null,{default:s(()=>[t(e(D),{class:"bg-primary hover:bg-primary"},{default:s(()=>[t(e(x),{class:"h-12 font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[10]||(a[10]=[r("Site Name",-1)])]),_:1}),t(e(x),{class:"h-12 font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[11]||(a[11]=[r("Domain",-1)])]),_:1}),t(e(x),{class:"h-12 font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[12]||(a[12]=[r("API Key",-1)])]),_:1}),t(e(x),{class:"h-12 font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[13]||(a[13]=[r("Status",-1)])]),_:1}),t(e(x),{class:"h-12 text-right font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[14]||(a[14]=[r(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),t(e(te),null,{default:s(()=>[T.value?C("",!0):(i(),d(e(D),{key:0},{default:s(()=>[t(e(_),{colspan:"5",class:"h-48 text-center",role:"cell"},{default:s(()=>[o("div",Te,[o("div",Ie,[t(e(q),{class:"h-8 w-8 text-muted-foreground/60","aria-hidden":"true"})]),o("div",Fe,[o("p",Pe,f(w.value?"No sites found":"No sites yet"),1),o("p",je,f(w.value?"Try adjusting your search filters":"Create your first site to start receiving leads"),1)]),w.value?(i(),d(e(u),{key:0,variant:"outline",size:"sm",onClick:I,class:"mt-2 font-body"},{default:s(()=>[...a[15]||(a[15]=[r(" Clear filters ",-1)])]),_:1})):(i(),d(e(u),{key:1,"as-child":"",size:"sm",class:"mt-2 font-body"},{default:s(()=>[t(e($),{href:e(B)().url},{default:s(()=>[t(e(K),{class:"mr-2 h-4 w-4","aria-hidden":"true"}),a[16]||(a[16]=r(" Create Your First Site ",-1))]),_:1},8,["href"])]),_:1}))])]),_:1})]),_:1})),(i(!0),A(z,null,J(S.sites.data,l=>(i(),d(e(D),{key:l.id,class:"group transition-colors hover:bg-muted/30"},{default:s(()=>[t(e(_),{class:"font-body font-medium"},{default:s(()=>[o("div",Ne,[o("div",Ee,[t(e(q),{class:"h-4 w-4 text-primary dark:text-primary","aria-hidden":"true"})]),o("span",null,f(l.site_name),1)])]),_:2},1024),t(e(_),{class:"font-body text-muted-foreground"},{default:s(()=>[o("code",Me,f(l.domain),1)]),_:2},1024),t(e(_),null,{default:s(()=>[o("div",Be,[o("code",qe,f(l.api_key.substring(0,20))+"... ",1),o("button",{type:"button",onClick:R(F=>L(l.id,l.api_key),["stop"]),class:"rounded p-1.5 text-muted-foreground transition-all hover:bg-primary/10 hover:text-primary","aria-label":`Copy API key for ${l.site_name}`},[p.value===l.id?(i(),d(e(E),{key:0,class:"h-4 w-4 text-primary","aria-hidden":"true"})):(i(),d(e(he),{key:1,class:"h-4 w-4","aria-hidden":"true"}))],8,Ke)])]),_:2},1024),t(e(_),null,{default:s(()=>[t(e(se),{variant:l.is_active?"default":"secondary",class:"gap-1.5 font-body font-medium","aria-label":l.is_active?"Active site":"Inactive site"},{default:s(()=>[(i(),d(j(l.is_active?e(E):e(ke)),{class:"h-3 w-3","aria-hidden":"true"})),r(" "+f(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant","aria-label"])]),_:2},1024),t(e(_),{class:"text-right"},{default:s(()=>[o("div",Oe,[t(e(u),{variant:"ghost",size:"sm","as-child":"",class:"h-8 font-body","aria-label":`View ${l.site_name}`},{default:s(()=>[t(e($),{href:e(b).show.url(l.id)},{default:s(()=>[t(e(be),{class:"mr-1.5 h-4 w-4","aria-hidden":"true"}),a[17]||(a[17]=r(" View ",-1))]),_:1},8,["href"])]),_:2},1032,["aria-label"]),t(e(u),{variant:"ghost",size:"sm","as-child":"",class:"h-8 font-body","aria-label":`Edit ${l.site_name}`},{default:s(()=>[t(e($),{href:e(b).edit.url(l.id)},{default:s(()=>[t(e(xe),{class:"mr-1.5 h-4 w-4","aria-hidden":"true"}),a[18]||(a[18]=r(" Edit ",-1))]),_:1},8,["href"])]),_:2},1032,["aria-label"]),t(e(u),{variant:"ghost",size:"sm",onClick:F=>X(l),class:"h-8 text-destructive hover:bg-destructive/10 hover:text-destructive","aria-label":`Delete ${l.site_name}`},{default:s(()=>[t(e(ge),{class:"h-4 w-4","aria-hidden":"true"})]),_:1},8,["onClick","aria-label"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),T.value?(i(),d(ae,{key:0,data:S.sites,"preserve-query":!0},null,8,["data"])):C("",!0)]),t(e(le),{open:g.value,"onUpdate:open":a[2]||(a[2]=l=>g.value=l)},{default:s(()=>[t(e(oe),{class:"font-body"},{default:s(()=>[t(e(re),{class:"space-y-4"},{default:s(()=>[t(e(ie),{class:"font-display text-2xl"},{default:s(()=>[...a[20]||(a[20]=[r(" Delete this site? ",-1)])]),_:1}),t(e(ne),{class:"text-base leading-relaxed"},{default:s(()=>[c.value?(i(),A(z,{key:0},[a[21]||(a[21]=r(" Once deleted, you will no longer be able to receive leads from ",-1)),o("strong",Ue,f(c.value.site_name),1),o("span",Xe,"("+f(c.value.domain)+")",1),a[22]||(a[22]=r(". This action is permanent and cannot be undone. ",-1))],64)):C("",!0)]),_:1})]),_:1}),t(e(de),{class:"gap-2 sm:gap-3"},{default:s(()=>[t(e(ue),{"as-child":""},{default:s(()=>[t(e(u),{variant:"outline",size:"lg",class:"font-body font-medium"},{default:s(()=>[...a[23]||(a[23]=[r(" Cancel ",-1)])]),_:1})]),_:1}),t(e(u),{type:"button",variant:"destructive",size:"lg",onClick:G,class:"font-body font-semibold shadow-lg shadow-destructive/20","data-test":"confirm-delete-site-button"},{default:s(()=>[...a[24]||(a[24]=[r(" Delete Site ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}}),bt=we(Ge,[["__scopeId","data-v-79288cb8"]]);export{bt as default};
