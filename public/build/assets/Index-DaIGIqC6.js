import{d as x,a as _,b as o,s as w,C as k,u as e,o as i,A as C,c as M,N as Y,e as t,h as J,w as s,g as m,z as q,i as r,j as D,l as I,x as Z,t as y,F,B as ee,y as te,E as K}from"./app-qMXsicPc.js";import{S,C as O}from"./SiteController-BQEcafVr.js";import{S as U,_ as ae,a as se,b as le,c as oe,d as N,e as re}from"./Pagination.vue_vue_type_script_setup_true_lang-Ovz4Q4Kg.js";import{_ as ie}from"./index-CuxOBepr.js";import{c as $,_ as p}from"./index-nl9hs0ev.js";import{d as ne,_ as de,a as ue,b as ce,c as fe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DxRVTJSn.js";import{_ as me,a as pe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-HV1ZfM0a.js";import{_ as _e}from"./Input.vue_vue_type_script_setup_true_lang-Ap08F9jn.js";import{c as X,G,_ as ye}from"./AppLayout.vue_vue_type_script_setup_true_lang-B0LGZkVo.js";import{c as L}from"./createLucideIcon-DbGhTKL4.js";import{X as ve}from"./x-CJHaFwEN.js";import{C as be}from"./copy-CbzFte6Y.js";import{E as he}from"./eye-D54py5Iv.js";import{S as xe,T as ge}from"./trash-2-DFpcMxb9.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CSEUMRIG.js";import"./useForwardPropsEmits-B7tYJHKP.js";import"./VisuallyHidden-CwqLLQly.js";import"./index-Cp2XgR6M.js";import"./useForwardExpose-FhnUXzcJ.js";import"./RovingFocusGroup-Br5YanVu.js";import"./check-GDAFR5vV.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./useFormControl-_8HNEr_n.js";import"./index-CqmfE78h.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-o_ig2r9_.js";const ke=L("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const H=L("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$e={"data-slot":"table-container",class:"relative w-full overflow-auto"},Ce=x({__name:"Table",props:{class:{}},setup(d){const n=d;return(u,c)=>(i(),_("div",$e,[o("table",{"data-slot":"table",class:k(e($)("w-full caption-bottom text-sm",n.class))},[w(u.$slots,"default")],2)]))}}),Se=x({__name:"TableBody",props:{class:{}},setup(d){const n=d;return(u,c)=>(i(),_("tbody",{"data-slot":"table-body",class:k(e($)("[&_tr:last-child]:border-0",n.class))},[w(u.$slots,"default")],2))}}),g=x({__name:"TableCell",props:{class:{}},setup(d){const n=d;return(u,c)=>(i(),_("td",{"data-slot":"table-cell",class:k(e($)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n.class))},[w(u.$slots,"default")],2))}}),P=x({__name:"TableRow",props:{class:{}},setup(d){const n=d;return(u,c)=>(i(),_("tr",{"data-slot":"table-row",class:k(e($)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n.class))},[w(u.$slots,"default")],2))}}),T=x({__name:"TableHead",props:{class:{}},setup(d){const n=d;return(u,c)=>(i(),_("th",{"data-slot":"table-head",class:k(e($)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n.class))},[w(u.$slots,"default")],2))}}),Te=x({__name:"TableHeader",props:{class:{}},setup(d){const n=d;return(u,c)=>(i(),_("thead",{"data-slot":"table-header",class:k(e($)("[&_tr]:border-b",n.class))},[w(u.$slots,"default")],2))}}),ze={class:"sites-manager relative flex h-full flex-1 flex-col gap-6 p-4 md:p-8"},Ae={class:"relative flex flex-col gap-4 md:flex-row md:items-start md:justify-between"},Ve={class:"relative flex flex-col gap-3 sm:flex-row sm:items-center"},De={class:"relative flex-1"},Ie={class:"flex items-center gap-2"},Fe={class:"table-container relative overflow-hidden rounded-xl border border-border bg-card shadow-sm"},Ne={class:"overflow-x-auto"},Pe={class:"flex flex-col items-center justify-center gap-3 text-muted-foreground"},je={class:"rounded-full bg-muted p-4"},Ee={class:"space-y-1"},Be={class:"font-body text-base font-semibold text-foreground"},Me={class:"font-body text-sm"},qe={class:"flex items-center gap-2"},Ke={class:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-primary/10 dark:bg-primary/20"},Oe={class:"font-mono text-sm"},Ue={class:"flex items-center gap-2"},Xe={class:"flex-1 font-mono text-xs text-muted-foreground line-clamp-1"},Ge=["onClick","aria-label"],He={class:"flex items-center justify-end gap-1"},Le={class:"font-semibold text-foreground"},Qe={class:"text-muted-foreground"},Re=x({__name:"Index",props:{sites:{},filters:{}},setup(d){const n=d,u=[{title:"Sites",href:S.index.url()}],c=C(n.filters.search||""),v=C(typeof n.filters.is_active=="boolean"?n.filters.is_active?"1":"0":n.filters.is_active||"all"),b=C(null),z=C(!1),h=C(null),j=M(()=>n.sites.data.length>0),A=M(()=>c.value||v.value!=="all");function V(){const f={};c.value&&(f.search=c.value),v.value!=="all"&&(f.is_active=v.value),K.visit(S.index.url({query:f}),{preserveState:!0,preserveScroll:!0,only:["sites","filters"]})}function E(){c.value="",v.value="all",V()}function Q(f){b.value=f,z.value=!0}function R(){b.value&&K.delete(S.destroy.url(b.value.id),{preserveScroll:!0,onSuccess:()=>{z.value=!1,b.value=null}})}async function W(f,a){try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(a),h.value=f,setTimeout(()=>{h.value=null},2e3);else{const l=document.createElement("textarea");l.value=a,l.style.position="fixed",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select();try{document.execCommand("copy")&&(h.value=f,setTimeout(()=>{h.value=null},2e3))}finally{document.body.removeChild(l)}}}catch(l){console.error("Failed to copy API key:",l),h.value=f,setTimeout(()=>{h.value=null},2e3)}}return Y(v,()=>{V()}),(f,a)=>(i(),_(F,null,[t(e(J),{title:"Sites"}),t(ye,{breadcrumbs:u},{default:s(()=>[(i(),m(q("style"),null,{default:s(()=>[...a[3]||(a[3]=[r(" @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Manrope:wght@400;500;600;700&display=swap'); ",-1)])]),_:1})),o("div",ze,[a[19]||(a[19]=o("div",{class:"pointer-events-none absolute inset-0 opacity-[0.04] dark:opacity-[0.03]",style:{background:`radial-gradient(
                        circle at 20% 20%,
                        hsl(var(--primary)) 0%,
                        transparent 50%
                    )`}},null,-1)),o("div",Ae,[a[5]||(a[5]=o("div",{class:"space-y-1.5"},[o("h1",{class:"font-display text-3xl font-bold tracking-tight text-foreground md:text-4xl"}," Sites "),o("p",{class:"max-w-2xl font-body text-base text-muted-foreground"}," Manage WordPress sites that send leads to your system ")],-1)),t(e(p),{"as-child":"",size:"lg",class:"create-btn shrink-0 font-body font-semibold shadow-md transition-all hover:shadow-lg"},{default:s(()=>[t(e(I),{href:e(X)().url,"data-test":"create-site-link"},{default:s(()=>[t(e(H),{class:"mr-2 h-5 w-5","aria-hidden":"true"}),a[4]||(a[4]=r(" Create Site ",-1))]),_:1},8,["href"])]),_:1})]),o("div",Ve,[o("div",De,[t(e(U),{class:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground","aria-hidden":"true"}),t(e(_e),{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=l=>c.value=l),type:"search",placeholder:"Search by site name or domain...",class:"h-11 pl-11 font-body shadow-sm",onKeydown:Z(V,["enter"]),"aria-label":"Search sites"},null,8,["modelValue"])]),o("div",Ie,[t(e(ae),{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=l=>v.value=l),"aria-label":"Filter by status"},{default:s(()=>[t(e(se),{class:"h-11 w-[180px] font-body shadow-sm"},{default:s(()=>[t(e(le),{placeholder:"All Sites"})]),_:1}),t(e(oe),null,{default:s(()=>[t(e(N),{value:"all"},{default:s(()=>[...a[6]||(a[6]=[r("All Sites",-1)])]),_:1}),t(e(N),{value:"1"},{default:s(()=>[...a[7]||(a[7]=[r("Active Only",-1)])]),_:1}),t(e(N),{value:"0"},{default:s(()=>[...a[8]||(a[8]=[r("Inactive Only",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(p),{variant:"outline",size:"lg",onClick:V,class:"h-11 shadow-sm","aria-label":"Apply filters"},{default:s(()=>[t(e(U),{class:"h-4 w-4"})]),_:1}),A.value?(i(),m(e(p),{key:0,variant:"ghost",size:"lg",onClick:E,class:"h-11 font-body","aria-label":"Clear all filters"},{default:s(()=>[t(e(ve),{class:"mr-2 h-4 w-4","aria-hidden":"true"}),a[9]||(a[9]=r(" Clear ",-1))]),_:1})):D("",!0)])]),o("div",Fe,[o("div",Ne,[t(e(Ce),null,{default:s(()=>[t(e(Te),null,{default:s(()=>[t(e(P),{class:"bg-primary hover:bg-primary"},{default:s(()=>[t(e(T),{class:"h-12 font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[10]||(a[10]=[r("Site Name",-1)])]),_:1}),t(e(T),{class:"h-12 font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[11]||(a[11]=[r("Domain",-1)])]),_:1}),t(e(T),{class:"h-12 font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[12]||(a[12]=[r("API Key",-1)])]),_:1}),t(e(T),{class:"h-12 font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[13]||(a[13]=[r("Status",-1)])]),_:1}),t(e(T),{class:"h-12 text-right font-body font-semibold text-primary-foreground"},{default:s(()=>[...a[14]||(a[14]=[r(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),t(e(Se),null,{default:s(()=>[j.value?D("",!0):(i(),m(e(P),{key:0},{default:s(()=>[t(e(g),{colspan:"5",class:"h-48 text-center",role:"cell"},{default:s(()=>[o("div",Pe,[o("div",je,[t(e(G),{class:"h-8 w-8 text-muted-foreground/60","aria-hidden":"true"})]),o("div",Ee,[o("p",Be,y(A.value?"No sites found":"No sites yet"),1),o("p",Me,y(A.value?"Try adjusting your search filters":"Create your first site to start receiving leads"),1)]),A.value?(i(),m(e(p),{key:0,variant:"outline",size:"sm",onClick:E,class:"mt-2 font-body"},{default:s(()=>[...a[15]||(a[15]=[r(" Clear filters ",-1)])]),_:1})):(i(),m(e(p),{key:1,"as-child":"",size:"sm",class:"mt-2 font-body"},{default:s(()=>[t(e(I),{href:e(X)().url},{default:s(()=>[t(e(H),{class:"mr-2 h-4 w-4","aria-hidden":"true"}),a[16]||(a[16]=r(" Create Your First Site ",-1))]),_:1},8,["href"])]),_:1}))])]),_:1})]),_:1})),(i(!0),_(F,null,ee(d.sites.data,l=>(i(),m(e(P),{key:l.id,class:"group transition-colors hover:bg-muted/30"},{default:s(()=>[t(e(g),{class:"font-body font-medium"},{default:s(()=>[o("div",qe,[o("div",Ke,[t(e(G),{class:"h-4 w-4 text-primary dark:text-primary","aria-hidden":"true"})]),o("span",null,y(l.site_name),1)])]),_:2},1024),t(e(g),{class:"font-body text-muted-foreground"},{default:s(()=>[o("code",Oe,y(l.domain),1)]),_:2},1024),t(e(g),null,{default:s(()=>[o("div",Ue,[o("code",Xe,y(l.api_key.substring(0,20))+"... ",1),o("button",{type:"button",onClick:te(B=>W(l.id,l.api_key),["stop"]),class:"rounded p-1.5 text-muted-foreground transition-all hover:bg-primary/10 hover:text-primary","aria-label":`Copy API key for ${l.site_name}`},[h.value===l.id?(i(),m(e(O),{key:0,class:"h-4 w-4 text-primary","aria-hidden":"true"})):(i(),m(e(be),{key:1,class:"h-4 w-4","aria-hidden":"true"}))],8,Ge)])]),_:2},1024),t(e(g),null,{default:s(()=>[t(e(ie),{variant:l.is_active?"default":"secondary",class:"gap-1.5 font-body font-medium","aria-label":l.is_active?"Active site":"Inactive site"},{default:s(()=>[(i(),m(q(l.is_active?e(O):e(ke)),{class:"h-3 w-3","aria-hidden":"true"})),r(" "+y(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant","aria-label"])]),_:2},1024),t(e(g),{class:"text-right"},{default:s(()=>[o("div",He,[t(e(p),{variant:"ghost",size:"sm","as-child":"",class:"h-8 font-body","aria-label":`View ${l.site_name}`},{default:s(()=>[t(e(I),{href:e(S).show.url(l.id)},{default:s(()=>[t(e(he),{class:"mr-1.5 h-4 w-4","aria-hidden":"true"}),a[17]||(a[17]=r(" View ",-1))]),_:1},8,["href"])]),_:2},1032,["aria-label"]),t(e(p),{variant:"ghost",size:"sm","as-child":"",class:"h-8 font-body","aria-label":`Edit ${l.site_name}`},{default:s(()=>[t(e(I),{href:e(S).edit.url(l.id)},{default:s(()=>[t(e(xe),{class:"mr-1.5 h-4 w-4","aria-hidden":"true"}),a[18]||(a[18]=r(" Edit ",-1))]),_:1},8,["href"])]),_:2},1032,["aria-label"]),t(e(p),{variant:"ghost",size:"sm",onClick:B=>Q(l),class:"h-8 text-destructive hover:bg-destructive/10 hover:text-destructive","aria-label":`Delete ${l.site_name}`},{default:s(()=>[t(e(ge),{class:"h-4 w-4","aria-hidden":"true"})]),_:1},8,["onClick","aria-label"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),j.value?(i(),m(re,{key:0,data:d.sites,"preserve-query":!0},null,8,["data"])):D("",!0)]),t(e(ne),{open:z.value,"onUpdate:open":a[2]||(a[2]=l=>z.value=l)},{default:s(()=>[t(e(de),{class:"font-body"},{default:s(()=>[t(e(ue),{class:"space-y-4"},{default:s(()=>[t(e(ce),{class:"font-display text-2xl"},{default:s(()=>[...a[20]||(a[20]=[r(" Delete this site? ",-1)])]),_:1}),t(e(fe),{class:"text-base leading-relaxed"},{default:s(()=>[b.value?(i(),_(F,{key:0},[a[21]||(a[21]=r(" Once deleted, you will no longer be able to receive leads from ",-1)),o("strong",Le,y(b.value.site_name),1),o("span",Qe,"("+y(b.value.domain)+")",1),a[22]||(a[22]=r(". This action is permanent and cannot be undone. ",-1))],64)):D("",!0)]),_:1})]),_:1}),t(e(me),{class:"gap-2 sm:gap-3"},{default:s(()=>[t(e(pe),{"as-child":""},{default:s(()=>[t(e(p),{variant:"outline",size:"lg",class:"font-body font-medium"},{default:s(()=>[...a[23]||(a[23]=[r(" Cancel ",-1)])]),_:1})]),_:1}),t(e(p),{type:"button",variant:"destructive",size:"lg",onClick:R,class:"font-body font-semibold shadow-lg shadow-destructive/20","data-test":"confirm-delete-site-button"},{default:s(()=>[...a[24]||(a[24]=[r(" Delete Site ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}}),wt=we(Re,[["__scopeId","data-v-79288cb8"]]);export{wt as default};
