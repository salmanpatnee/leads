import{d as h,U,c as R,g as p,w as i,s as S,j as g,u as e,o as c,m as A,x as j,y as z,e as a,C as E,n as K,p as L,J as Y,V as H,a as C,b as s,i as d,z as G,t as v,H as J,I as O,T as Z,F as Q}from"./app-DgdkhfNe.js";import{C as X,S as w}from"./SiteController-Dh8GhNI7.js";import{_ as V}from"./InputError.vue_vue_type_script_setup_true_lang-CV-a1nkV.js";import{a as q,b as $,_ as P,C as B}from"./index-DSjENv2k.js";import{P as N,c as I,_}from"./index-Draz5HlZ.js";import{d as ee,_ as te,a as se,b as ae,c as oe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CJ-xXhn_.js";import{_ as ie,a as re}from"./DialogFooter.vue_vue_type_script_setup_true_lang-ISCamKO_.js";import{_ as de}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-D7wuwaru.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-BFT0Tc_H.js";import{_ as k}from"./Label.vue_vue_type_script_setup_true_lang-DohpGQm-.js";import{u as le}from"./useForwardPropsEmits-CAM7rIcR.js";import{c as ne}from"./VisuallyHidden-09slDmA_.js";import{u as ue}from"./useFormControl-DhBR8YWC.js";import{u as W}from"./useForwardExpose-BJ6c51DF.js";import{V as me}from"./VisuallyHiddenInput-DDoXKnPD.js";import{u as ce,r as fe}from"./index-Bm7spDUF.js";import{c as pe}from"./createLucideIcon-BcewUAwC.js";import{L as T}from"./loader-circle-Dyvq35iB.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CSEUMRIG.js";import"./x-CacmQr73.js";const[ye,ve]=ne("SwitchRoot");var ge=h({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(m,{emit:l}){const r=m,f=l,{disabled:o}=U(r),u=ce(r,"modelValue",f,{defaultValue:r.defaultValue,passive:r.modelValue===void 0});function b(){o.value||(u.value=!u.value)}const{forwardRef:x,currentElement:t}=W(),y=ue(t),M=R(()=>r.id&&t.value?document.querySelector(`[for="${r.id}"]`)?.innerText:void 0);return ve({modelValue:u,toggleCheck:b,disabled:o}),(n,je)=>(c(),p(e(N),A(n.$attrs,{id:n.id,ref:e(x),role:"switch",type:n.as==="button"?"button":void 0,value:n.value,"aria-label":n.$attrs["aria-label"]||M.value,"aria-checked":e(u),"aria-required":n.required,"data-state":e(u)?"checked":"unchecked","data-disabled":e(o)?"":void 0,"as-child":n.asChild,as:n.as,disabled:e(o),onClick:b,onKeydown:j(z(b,["prevent"]),["enter"])}),{default:i(()=>[S(n.$slots,"default",{modelValue:e(u)}),e(y)&&n.name?(c(),p(e(me),{key:0,type:"checkbox",name:n.name,disabled:e(o),required:n.required,value:n.value,checked:!!e(u)},null,8,["name","disabled","required","value","checked"])):g("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),_e=ge,he=h({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(m){const l=ye();return W(),(r,f)=>(c(),p(e(N),{"data-state":e(l).modelValue?.value?"checked":"unchecked","data-disabled":e(l).disabled.value?"":void 0,"as-child":r.asChild,as:r.as},{default:i(()=>[S(r.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),xe=he;const F=pe("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),we=h({__name:"Switch",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(m,{emit:l}){const r=m,f=l,o=fe(r,"class"),u=le(o,f);return(b,x)=>(c(),p(e(_e),A({"data-slot":"switch"},e(u),{class:e(I)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r.class)}),{default:i(t=>[a(e(xe),{"data-slot":"switch-thumb",class:E(e(I)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"))},{default:i(()=>[S(b.$slots,"thumb",K(L(t)))]),_:2},1032,["class"])]),_:3},16,["class"]))}}),ke={class:"site-form-container mx-auto max-w-3xl space-y-8"},Se={class:"space-y-3"},Ce={class:"font-display text-3xl font-bold tracking-tight text-foreground"},Ve={class:"max-w-2xl font-body text-base text-muted-foreground"},qe={class:"form-field space-y-3"},$e={class:"space-y-1.5"},Pe={class:"form-field space-y-3"},Be={class:"space-y-1.5"},Ie={class:"flex items-start gap-2 rounded-lg bg-muted/50 p-3"},De={class:"form-field space-y-4"},Te={class:"flex flex-col gap-4 rounded-xl border border-border/50 bg-muted/20 p-5 transition-colors md:flex-row md:items-center md:justify-between"},Fe={class:"space-y-1.5"},Re={class:"flex items-center gap-3"},Ae={class:"flex flex-col gap-4 border-t border-border/50 pt-6 sm:flex-row sm:items-center sm:justify-between"},ze={class:"flex items-center gap-4"},Ee={class:"flex items-center gap-2 rounded-lg bg-primary/10 px-4 py-2 dark:bg-primary/20",role:"status","aria-live":"polite"},Ne={key:1,class:"danger-zone space-y-6"},We={class:"font-semibold text-foreground"},Me={class:"text-muted-foreground"},Ue=h({__name:"Form",props:{site:{}},setup(m){const l=m,r=R(()=>!!l.site),f=Y("siteNameInput"),o=H({site_name:l.site?.site_name||"",domain:l.site?.domain||"",is_active:l.site?!!l.site.is_active:!0});function u(){r.value&&l.site?o.patch(w.update.url(l.site.id),{preserveScroll:!0,onSuccess:()=>{},onError:()=>{f.value?.$el?.focus()}}):o.post(w.store.url(),{preserveScroll:!0,onSuccess:()=>{},onError:()=>{f.value?.$el?.focus()}})}function b(){!r.value||!l.site||o.delete(w.destroy.url(l.site.id),{preserveScroll:!0,onSuccess:()=>{}})}return(x,t)=>(c(),C(Q,null,[(c(),p(G("style"),null,{default:i(()=>[...t[3]||(t[3]=[d(" @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Manrope:wght@400;500;600;700&display=swap'); ",-1)])]),_:1})),s("div",ke,[s("div",Se,[s("h2",Ce,v(r.value?"Edit Site Details":"Add New Site"),1),s("p",Ve,v(r.value?"Update the information for your WordPress site below.":"Register a new WordPress site to start receiving leads. You'll get a unique API key for secure integration."),1)]),r.value?g("",!0):(c(),p(e(P),{key:0,class:"border-primary/30 bg-primary/5 dark:border-primary/30 dark:bg-primary/10"},{default:i(()=>[a(e(F),{class:"h-5 w-5 text-primary"}),a(e(q),{class:"font-body text-foreground"},{default:i(()=>[...t[4]||(t[4]=[d(" API Key Generation ",-1)])]),_:1}),a(e($),{class:"font-body text-muted-foreground"},{default:i(()=>[...t[5]||(t[5]=[d(" A unique API key will be automatically generated when you create this site. You'll need this key to configure the Contact Form 7 integration on your WordPress site. ",-1)])]),_:1})]),_:1})),s("form",{onSubmit:z(u,["prevent"]),class:"form-card space-y-8 rounded-2xl border border-border bg-card p-6 shadow-sm md:p-8"},[s("div",qe,[s("div",$e,[a(e(k),{for:"site_name",class:"font-body text-base font-semibold text-foreground"},{default:i(()=>[...t[6]||(t[6]=[d(" Site Name ",-1),s("span",{class:"text-destructive","aria-label":"required"},"*",-1)])]),_:1}),t[7]||(t[7]=s("p",{class:"text-sm text-muted-foreground"}," A friendly name to identify this WordPress site in your dashboard. ",-1))]),a(e(D),{id:"site_name",ref_key:"siteNameInput",ref:f,modelValue:e(o).site_name,"onUpdate:modelValue":t[0]||(t[0]=y=>e(o).site_name=y),type:"text",name:"site_name",class:"h-12 font-body text-base shadow-sm transition-all focus:shadow-md",required:"",placeholder:"My WordPress Site","aria-invalid":!!e(o).errors.site_name,"aria-describedby":e(o).errors.site_name?"site-name-error":void 0},null,8,["modelValue","aria-invalid","aria-describedby"]),a(V,{id:"site-name-error",message:e(o).errors.site_name,class:"flex items-center gap-2 font-body"},null,8,["message"])]),s("div",Pe,[s("div",Be,[a(e(k),{for:"domain",class:"font-body text-base font-semibold text-foreground"},{default:i(()=>[...t[8]||(t[8]=[d(" Domain ",-1),s("span",{class:"text-destructive","aria-label":"required"},"*",-1)])]),_:1}),t[9]||(t[9]=s("p",{class:"text-sm text-muted-foreground"}," The domain name where your WordPress site is hosted. ",-1))]),a(e(D),{id:"domain",modelValue:e(o).domain,"onUpdate:modelValue":t[1]||(t[1]=y=>e(o).domain=y),type:"text",name:"domain",class:"h-12 font-body font-mono text-base shadow-sm transition-all focus:shadow-md",required:"",placeholder:"example.com","aria-invalid":!!e(o).errors.domain,"aria-describedby":e(o).errors.domain?"domain-error":void 0},null,8,["modelValue","aria-invalid","aria-describedby"]),s("div",Ie,[a(e(F),{class:"mt-0.5 h-4 w-4 shrink-0 text-muted-foreground"}),t[10]||(t[10]=s("p",{class:"text-sm text-muted-foreground"},[d(" Enter the domain without "),s("code",{class:"rounded bg-muted px-1.5 py-0.5 font-mono text-xs"},"http://"),d(" or "),s("code",{class:"rounded bg-muted px-1.5 py-0.5 font-mono text-xs"},"www."),d(" (e.g., "),s("span",{class:"font-medium"},"example.com"),d(") ")],-1))]),a(V,{id:"domain-error",message:e(o).errors.domain,class:"flex items-center gap-2 font-body"},null,8,["message"])]),s("div",De,[s("div",Te,[s("div",Fe,[a(e(k),{for:"is_active",class:"font-body text-base font-semibold text-foreground"},{default:i(()=>[...t[11]||(t[11]=[d(" Active Status ",-1)])]),_:1}),t[12]||(t[12]=s("p",{class:"text-sm text-muted-foreground"}," When active, this site can send leads to your system. Disable to temporarily stop receiving submissions. ",-1))]),s("div",Re,[s("span",{class:E(["font-body text-sm font-medium",e(o).is_active?"text-primary":"text-muted-foreground"])},v(e(o).is_active?"Active":"Inactive"),3),a(e(we),{id:"is_active",checked:e(o).is_active,"onUpdate:checked":t[2]||(t[2]=y=>e(o).is_active=y),name:"is_active","aria-label":e(o).is_active?"Site is active":"Site is inactive"},null,8,["checked","aria-label"])])])]),s("div",Ae,[s("div",ze,[a(e(_),{type:"submit",size:"lg",disabled:e(o).processing,class:"submit-btn font-body font-semibold shadow-lg shadow-primary/20 transition-all hover:shadow-xl hover:shadow-primary/30","data-test":"save-site-button"},{default:i(()=>[e(o).processing?(c(),p(e(T),{key:0,class:"mr-2 h-5 w-5 animate-spin","aria-hidden":"true"})):g("",!0),d(" "+v(r.value?"Update Site":"Create Site"),1)]),_:1},8,["disabled"]),a(Z,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 scale-95"},{default:i(()=>[J(s("div",Ee,[a(e(X),{class:"h-4 w-4 text-primary"}),t[13]||(t[13]=s("span",{class:"font-body text-sm font-medium text-primary"}," Saved successfully ",-1))],512),[[O,e(o).recentlySuccessful]])]),_:1})])])],32),r.value&&m.site?(c(),C("div",Ne,[t[22]||(t[22]=s("div",{class:"space-y-2"},[s("h3",{class:"font-display text-2xl font-bold tracking-tight text-foreground"}," Danger Zone "),s("p",{class:"font-body text-base text-muted-foreground"}," Permanently delete this site and remove it from your system. ")],-1)),a(e(P),{class:"border-destructive/50 bg-destructive/5"},{default:i(()=>[a(e(B),{class:"h-5 w-5 text-destructive"}),a(e(q),{class:"font-body font-semibold text-destructive"},{default:i(()=>[...t[14]||(t[14]=[d(" Warning: This action cannot be undone ",-1)])]),_:1}),a(e($),{class:"space-y-4"},{default:i(()=>[t[21]||(t[21]=s("p",{class:"font-body text-sm text-destructive/90"}," Deleting this site will permanently remove it from your system. All leads associated with this site will remain in your database but will no longer be linked to an active site connection. ",-1)),a(e(ee),null,{default:i(()=>[a(e(de),{"as-child":""},{default:i(()=>[a(e(_),{variant:"destructive",size:"lg",class:"font-body font-semibold shadow-lg shadow-destructive/20","data-test":"delete-site-button"},{default:i(()=>[a(e(B),{class:"mr-2 h-5 w-5","aria-hidden":"true"}),t[15]||(t[15]=d(" Delete Site Permanently ",-1))]),_:1})]),_:1}),a(e(te),{class:"font-body"},{default:i(()=>[a(e(se),{class:"space-y-4"},{default:i(()=>[a(e(ae),{class:"font-display text-2xl"},{default:i(()=>[d(" Delete "+v(m.site.site_name)+"? ",1)]),_:1}),a(e(oe),{class:"space-y-3 text-base leading-relaxed"},{default:i(()=>[s("p",null,[t[16]||(t[16]=d(" You're about to permanently delete ",-1)),s("strong",We,v(m.site.site_name),1),s("span",Me," ("+v(m.site.domain)+") ",1),t[17]||(t[17]=d(". ",-1))]),t[18]||(t[18]=s("p",null," This will immediately stop all lead submissions from this WordPress site. This action is permanent and cannot be undone. ",-1))]),_:1})]),_:1}),a(e(ie),{class:"gap-2 sm:gap-3"},{default:i(()=>[a(e(re),{"as-child":""},{default:i(()=>[a(e(_),{variant:"outline",size:"lg",class:"font-medium"},{default:i(()=>[...t[19]||(t[19]=[d(" Cancel ",-1)])]),_:1})]),_:1}),a(e(_),{type:"button",variant:"destructive",size:"lg",disabled:e(o).processing,onClick:b,class:"font-semibold shadow-lg shadow-destructive/20","data-test":"confirm-delete-site-button"},{default:i(()=>[e(o).processing?(c(),p(e(T),{key:0,class:"mr-2 h-5 w-5 animate-spin","aria-hidden":"true"})):g("",!0),t[20]||(t[20]=d(" Yes, Delete Permanently ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):g("",!0)])],64))}}),mt=be(Ue,[["__scopeId","data-v-f221ac86"]]);export{mt as default};
